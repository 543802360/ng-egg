<!--行业税收 -->
<nz-card [nzBordered]="false" [nzExtra]="extraTemplate1" class="ant-card__body-nopadding sales-card">
  <ng-template #extraTemplate1>
    <div class="sales-extra-wrap">


      <div nz-row nzGutter="8" style="margin: 5px; text-align: center;">
        <app-bdg-select class="board-1" #bdgSelect></app-bdg-select>

        <span class="header-label"> 所属行业:</span>
        <nz-tree-select #hyTreeSelect class="board-2 hymc-tree-select" [(ngModel)]="selectedHymc" [nzNodes]="hymcNodes"
          nzAllowClear="true" nzMultiple="false" [nzPlaceHolder]="'请选择行业名称'">
        </nz-tree-select>
        <hy-base-select class="board-3" #hyBase></hy-base-select>
        <span class="header-label"> 税收名次:</span>
        <nz-select class="board-4" style="margin: 0 5px;width: 100px;" [(ngModel)]="selectedOrder" nzPlaceHolder="请选择排名"
          nzAllowClear>
          <nz-option nzLabel="10" [nzValue]="10">
          </nz-option>
          <nz-option nzLabel="100" [nzValue]="100">
          </nz-option>
          <nz-option nzLabel="200" [nzValue]="200">
          </nz-option>
          <nz-option nzLabel="500" [nzValue]="500">
          </nz-option>
          <nz-option nzLabel="1000" [nzValue]="1000">
          </nz-option>
          <nz-option nzLabel="2000" [nzValue]="2000">
          </nz-option>
          <nz-option nzLabel="5000" [nzValue]="5000">
          </nz-option>
        </nz-select>
        <label style="margin: 5px;" nz-checkbox [(ngModel)]="isZxsr" name="">专项收入</label>

      </div>

      <div nz-row nzGutter="8" style="margin: 10px 5px;">
        <span class="header-label">入库时间：</span>
        <app-month-range class="board-5" #monthRange style="margin-right: 5px;"></app-month-range>
        <button nz-button class="board-6" (click)="getData()" [disabled]="http.loading" nzType="primary"
          style="margin-left: 6px;">查询</button>
        <button nz-button class="board-7" (click)="download()" [disabled]="http.loading" nzType="primary"
          style="margin-left: 6px;">导出</button>
        <button nz-button nz-tooltip nzTooltipTitle="帮助" (click)="startBoard()" nzType="default"
          style="margin-left: 6px;" nzShape="circle">
          <i nz-icon nzType="question" nzTheme="outline"></i></button>
      </div>

    </div>
  </ng-template>
  <div nz-row nzGutter="4" style="height: 100%;">
    <!-- 表格数据 -->

    <div nz-col nzSpan="12" style="height: 100%;">
      <st #st style="width: 100%; margin-top: 10px;" header="税收排名（单位：万元）" [data]="data" [columns]="columns"
        [page]="page" [total]="total" [loading]="http.loading" [ps]="10" [pi]="1" bordered="true" size="middle"
        [scroll]="{x:'900px',y:'576px'}" (change)="change($event)">
        <ng-template st-row="tbzjz-tpl" let-item let-index="index">
          <nz-tag *ngIf="item.TBZJZ<0" nzColor="red">
            <span nz-tooltip [nzTooltipTitle]="'同比增减：' + item.TBZJZ"> {{item.TBZJZ|number}}</span>
          </nz-tag>
          <span *ngIf="item.TBZJZ>=0" nz-tooltip [nzTooltipTitle]="'同比增减：' + item.TBZJZ"> {{item.TBZJZ|number}}</span>
        </ng-template>
        <ng-template st-row="tbzjf-tpl" let-item let-index="index">
          <nz-tag *ngIf="item.TBZJZ<0" nzColor="red">
            <span nz-tooltip [nzTooltipTitle]="'同比增减：' + item.TBZJF"> {{item.TBZJF}}</span>
          </nz-tag>
          <span *ngIf="item.TBZJZ>=0" nz-tooltip [nzTooltipTitle]="'同比增减幅：' + item.TBZJF"> {{item.TBZJF}}</span>
        </ng-template>

        <ng-template st-row='order-tpl' let-item let-index="index">
          <nz-badge [nzCount]="(this.st.pi - 1) * this.st.ps + index + 1"></nz-badge>
        </ng-template>

      </st>
    </div>
    <!-- 地图 -->
    <div nz-col nzSpan="12" style="height: 100%">
      <div leaflet class="map-container" (loaded)="mapload($event)"></div>
    </div>

  </div>
</nz-card>